<!DOCTYPE html>
<html>
<head>
    <title>YTDL UI</title>
    <base href="/ytdl/">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#05070a">
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#e8f0ff">

    <!-- Global styles -->
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/boxes.css">
    <link rel="stylesheet" href="css/form.css">
    <link rel="stylesheet" href="css/particles.css">
    <link rel="stylesheet" href="css/toggle.css">
    <link rel="stylesheet" href="css/json-viewer.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/cache-panel.css">
    <link rel="stylesheet" href="css/player.css">

    <!-- JS -->
    <script src="js/json-viewer.js" defer></script>
    <script src="js/theme.js" defer></script>
    <script src="js/particles.js" defer></script>
    <script src="js/form-setup.js" defer></script>
    <script src="js/clipboard.js" defer></script>
    <script src="js/audio-player.js" defer></script>
    <script src="js/form-submit.js" defer></script>
    <script src="js/cache-panel.js" defer></script>
</head>
<body>

<button id="theme-toggle" class="theme-toggle" type="button" aria-label="Toggle dark mode">
  <span class="toggle-track">
    <span class="toggle-thumb">
      <!-- Heroicon-style Sun -->
      <span class="icon-sun" aria-hidden="true">
        <svg class="icon-svg" viewBox="0 0 24 24">
          <!-- center sun -->
          <circle cx="12" cy="12" r="3.25" />
          <!-- rays -->
          <path d="M12 2.25v2.5
                   M12 19.25v2.5
                   M4.72 4.72l1.77 1.77
                   M17.51 17.51l1.77 1.77
                   M2.25 12h2.5
                   M19.25 12h2.5
                   M4.72 19.28l1.77-1.77
                   M17.51 6.49l1.77-1.77" />
        </svg>
      </span>

      <!-- Heroicon-style Moon -->
      <span class="icon-moon" aria-hidden="true">
        <svg class="icon-svg" viewBox="0 0 24 24">
          <path d="M21 12.79A9 9 0 1111.21 3
                   7 7 0 0021 12.79z" />
        </svg>
      </span>
    </span>
  </span>
</button>

<div id="cache-panel" class="cache-panel">
  <button id="cache-toggle" class="cache-toggle" type="button" aria-expanded="false">
    Cache
    <span id="cache-count" class="cache-count">0</span>
  </button>

  <div id="cache-list" class="cache-list" aria-label="Cached videos">
    <div class="cache-loading">Loading cache…</div>
  </div>
</div>

<!--
  MAIN LAYOUT
  ------------------------------------------------------------------
  Left:  request form
  Right: JSON result viewer (appears after first request)
-->
<div class="page">

  <!-- LEFT COLUMN: form + processing indicator -->
  <div class="container">
    <div class="box box--main">
      <div class="box-inner">
        <!-- App logo -->
        <img src="images/ytdlicon.png" class="box-image">

        <!-- YTDL request form -->
        <form action="/ytdl/process" method="POST" class="content" id="ytdl-form">

          <label>
            Video:
            <input type="text" name="textField" required>
          </label>

          <label>
            Format:
            <select name="dropdown" id="dropdown"></select>
          </label>

          <label class="centered">
            <input type="checkbox" name="checkbox">
            No Limit?
          </label>

          <button type="submit">
            Go <span class="go-arrow">➤</span>
          </button>
        </form>
      </div>
    </div>

    <!-- Processing indicator (shown while request is running) -->
    <div id="processing-indicator" class="processing-indicator hidden" aria-live="polite">
      <span class="processing-spinner"></span>
      <span>Processing…</span>
    </div>
  </div>

  <!-- RIGHT COLUMN: JSON result viewer -->
  <div class="container result-container">
    <div class="box box--result">
      <div class="box-inner">
        <h2 id="result-heading" class="result-heading">Result</h2>

        <div id="error-banner" class="error-banner hidden"></div>

        <!-- Pretty JSON output area -->
        <div id="json-output" class="json-output">
          <button type="button" id="copy-json-btn" class="copy-btn" aria-label="Copy JSON" title="Copy JSON">
            <!-- copy -->
            <svg class="copy-icon copy-icon--copy" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M9 9h10v10H9z"></path>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
            <!-- check -->
            <svg class="copy-icon copy-icon--check" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M20 6 9 17l-5-5"></path>
            </svg>
          </button>

          <div id="json-render">
            <em>Fill in the form and press "Go" to see the API response here.</em>
          </div>
        </div>
      </div>
    </div>

    <!-- Mini audio player (shown only for audio videourl results) -->
    <div id="mini-audio-player" class="mini-audio-player mini-audio-player--hidden" aria-hidden="true">
      <button id="mini-audio-play" class="mini-audio-play" type="button" aria-label="Play audio">
        <svg class="mini-audio-icon mini-audio-icon--play" viewBox="0 0 24 24">
          <polygon points="8,5 19,12 8,19" fill="currentColor" />
        </svg>

        <svg class="mini-audio-icon mini-audio-icon--pause" viewBox="0 0 24 24">
          <rect x="6" y="5" width="4" height="14" fill="currentColor" />
          <rect x="14" y="5" width="4" height="14" fill="currentColor" />
        </svg>
      </button>

      <div class="mini-audio-track" id="mini-audio-track">
        <div class="mini-audio-track-line"></div>
        <div class="mini-audio-track-fill" id="mini-audio-track-fill"></div>
        <div class="mini-audio-thumb" id="mini-audio-thumb"></div>
      </div>
    </div>

    <!-- Hidden audio element used by the mini player -->
    <audio id="mini-audio" preload="none"></audio>
  </div>

</div>

</body>
</html>
