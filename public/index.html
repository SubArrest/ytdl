<!DOCTYPE html>
<html>
<head>
    <title>YTDL UI</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Global styles -->
    <link rel="stylesheet" href="styles.css">

    <!-- JSON viewer logic (defines renderJsonInto + lastJsonData) -->
    <script src="json-viewer.js" defer></script>

    <!-- App logic (form handling, fetch, etc.) -->
    <script src="app.js" defer></script>
</head>
<body>

<button id="theme-toggle" class="theme-toggle" type="button" aria-label="Toggle dark mode">
  <span class="toggle-track">
    <span class="toggle-thumb">
      <!-- Heroicon-style Sun -->
      <span class="icon-sun" aria-hidden="true">
        <svg class="icon-svg" viewBox="0 0 24 24">
          <!-- center sun -->
          <circle cx="12" cy="12" r="3.25" />
          <!-- rays -->
          <path d="M12 2.25v2.5
                   M12 19.25v2.5
                   M4.72 4.72l1.77 1.77
                   M17.51 17.51l1.77 1.77
                   M2.25 12h2.5
                   M19.25 12h2.5
                   M4.72 19.28l1.77-1.77
                   M17.51 6.49l1.77-1.77" />
        </svg>
      </span>

      <!-- Heroicon-style Moon -->
      <span class="icon-moon" aria-hidden="true">
        <svg class="icon-svg" viewBox="0 0 24 24">
          <path d="M21 12.79A9 9 0 1111.21 3
                   7 7 0 0021 12.79z" />
        </svg>
      </span>
    </span>
  </span>
</button>

<!--
  MAIN LAYOUT
  ------------------------------------------------------------------
  Left:  request form
  Right: JSON result viewer (appears after first request)
-->
<div class="page">

  <!-- LEFT COLUMN: form + processing indicator -->
  <div class="container">
    <div class="box box--main">
      <div class="box-inner">
        <!-- App logo -->
        <img src="images/ytdlicon.png" class="box-image">

        <!-- YTDL request form -->
        <form action="/ytdl/process" method="POST" class="content" id="ytdl-form">

          <label>
            Video:
            <input type="text" name="textField" required>
          </label>
          <br><br>

          <label>
            Format:
            <select name="dropdown" id="dropdown"></select>
          </label>
          <br><br>

          <label>
            <input type="checkbox" name="checkbox">
            No Limit?
          </label>
          <br><br>

          <button type="submit">
            Go <span class="go-arrow">➤</span>
          </button>
        </form>
      </div>
    </div>

    <!-- Processing indicator (shown while request is running) -->
    <div id="processing-indicator" class="processing-indicator hidden" aria-live="polite">
      <span class="processing-spinner"></span>
      <span>Processing…</span>
    </div>
  </div>

  <!-- RIGHT COLUMN: JSON result viewer -->
  <div class="container result-container">
    <div class="box box--result">
      <div class="box-inner">
        <h2 id="result-heading" class="result-heading">Result</h2>

        <div id="error-banner" class="error-banner hidden"></div>

        <!-- Copy raw JSON to clipboard -->
        <button type="button" id="copy-json-btn" class="copy-btn">Copy JSON</button>

        <!-- Pretty JSON output area -->
        <div id="json-output" class="json-output">
          <em>Fill in the form and press "Go" to see the API response here.</em>
        </div>
      </div>
    </div>
  </div>

</div>

</body>
</html>
